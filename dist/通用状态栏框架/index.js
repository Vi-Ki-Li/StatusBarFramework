import'https://testingcf.jsdelivr.net/npm/compare-versions/+esm';import'https://testingcf.jsdelivr.net/npm/json5/+esm';import'https://testingcf.jsdelivr.net/npm/jsonrepair/+esm';import'https://testingcf.jsdelivr.net/npm/zod/v4/core/+esm';var e={109(e,n,a){var t=a(670);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('eb064dae',t,!1,{ssrId:!0})},317(e,n,a){var t=a(792);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('539156f6',t,!1,{ssrId:!0})},424(e,n,a){function t(e,n){for(var a=[],t={},r=0;r<n.length;r++){var o=n[r],s=o[0],i={id:e+':'+r,css:o[1],media:o[2],sourceMap:o[3]};t[s]?t[s].parts.push(i):a.push(t[s]={id:s,parts:[i]})}return a}a.d(n,{A:()=>p});var r='undefined'!=typeof document;if('undefined'!=typeof DEBUG&&DEBUG&&!r)throw new Error('vue-style-loader cannot be used in a non-browser environment. Use { target: \'node\' } in your Webpack config to indicate a server-rendering environment.');var o={},s=r&&(document.head||document.getElementsByTagName('head')[0]),i=null,c=0,l=!1,d=function(){},A=null,C='data-vue-ssr-id',m='undefined'!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,n,a,r){l=a,A=r||{};var s=t(e,n);return g(s),function(n){for(var a=[],r=0;r<s.length;r++){var i=s[r];(c=o[i.id]).refs--,a.push(c)}n?g(s=t(e,n)):s=[];for(r=0;r<a.length;r++){var c;if(0===(c=a[r]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function g(e){for(var n=0;n<e.length;n++){var a=e[n],t=o[a.id];if(t){t.refs++;for(var r=0;r<t.parts.length;r++)t.parts[r](a.parts[r]);for(;r<a.parts.length;r++)t.parts.push(v(a.parts[r]));t.parts.length>a.parts.length&&(t.parts.length=a.parts.length)}else{var s=[];for(r=0;r<a.parts.length;r++)s.push(v(a.parts[r]));o[a.id]={id:a.id,refs:1,parts:s}}}}function u(){var e=document.createElement('style');return e.type='text/css',s.appendChild(e),e}function v(e){var n,a,t=document.querySelector('style['+C+'~="'+e.id+'"]');if(t){if(l)return d;t.parentNode.removeChild(t)}if(m){var r=c++;t=i||(i=u()),n=f.bind(null,t,r,!1),a=f.bind(null,t,r,!0)}else t=u(),n=x.bind(null,t),a=function(){t.parentNode.removeChild(t)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}var b,h=(b=[],function(e,n){return b[e]=n,b.filter(Boolean).join('\n')});function f(e,n,a,t){var r=a?'':t.css;if(e.styleSheet)e.styleSheet.cssText=h(n,r);else{var o=document.createTextNode(r),s=e.childNodes;s[n]&&e.removeChild(s[n]),s.length?e.insertBefore(o,s[n]):e.appendChild(o)}}function x(e,n){var a=n.css,t=n.media,r=n.sourceMap;if(t&&e.setAttribute('media',t),A.ssrId&&e.setAttribute(C,n.id),r&&(a+='\n/*# sourceURL='+r.sources[0]+' */',a+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+' */'),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},465(e){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var a='',t=void 0!==n[5];return n[4]&&(a+='@supports ('.concat(n[4],') {')),n[2]&&(a+='@media '.concat(n[2],' {')),t&&(a+='@layer'.concat(n[5].length>0?' '.concat(n[5]):'',' {')),a+=e(n),t&&(a+='}'),n[2]&&(a+='}'),n[4]&&(a+='}'),a}).join('')},n.i=function(e,a,t,r,o){'string'==typeof e&&(e=[[null,e,void 0]]);var s={};if(t)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);t&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]='@layer'.concat(d[5].length>0?' '.concat(d[5]):'',' {').concat(d[1],'}')),d[5]=o),a&&(d[2]?(d[1]='@media '.concat(d[2],' {').concat(d[1],'}'),d[2]=a):d[2]=a),r&&(d[4]?(d[1]='@supports ('.concat(d[4],') {').concat(d[1],'}'),d[4]=r):d[4]=''.concat(r)),n.push(d))}},n}},670(e,n,a){a.r(n),a.d(n,{default:()=>i});var t=a(699),r=a.n(t),o=a(465),s=a.n(o)()(r());s.push([e.id,'.status-bar[data-v-0aa8f2f0]{--bar-bg:rgba(255,255,255,0.92);--bar-border:rgba(0,0,0,0.08);--bar-shadow:0 4px 16px rgba(0,0,0,0.08);--text-primary:#1f2937;--text-secondary:#6b7280;--text-tertiary:#9ca3af;--color-primary:#6366f1;--color-success:#10b981;font-family:\'Outfit\',\'Inter\',system-ui,-apple-system,sans-serif;font-size:14px;color:var(--text-primary);background:var(--bar-bg);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid var(--bar-border);border-radius:12px;padding:14px 16px;margin-top:12px;box-shadow:var(--bar-shadow)}.status-bar__header[data-v-0aa8f2f0]{display:flex;align-items:center;gap:10px;padding-bottom:12px;margin-bottom:12px;border-bottom:1px solid var(--bar-border)}.status-bar__icon[data-v-0aa8f2f0]{color:var(--color-primary);flex-shrink:0}.status-bar__title[data-v-0aa8f2f0]{font-weight:600;font-size:15px;color:var(--text-primary)}.status-bar__streaming[data-v-0aa8f2f0]{margin-left:auto;font-size:11px;font-weight:500;padding:3px 10px;background:rgba(16,185,129,0.12);color:var(--color-success);border-radius:12px;animation:pulse-0aa8f2f0 1.5s ease-in-out infinite}@keyframes pulse-0aa8f2f0{0%,100%{opacity:1}50%{opacity:0.5}}.status-bar__content[data-v-0aa8f2f0]{display:flex;flex-direction:column;gap:8px}.status-bar__placeholder[data-v-0aa8f2f0]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:20px;color:var(--text-secondary);text-align:center}.status-bar__hint[data-v-0aa8f2f0]{font-size:12px;color:var(--text-tertiary)}\n','',{version:3,sources:['webpack://./src/通用状态栏框架/components/statusbar/StatusBar.vue'],names:[],mappings:'AAqCA,6BACE,+BAAmC,CACnC,6BAAiC,CACjC,wCAA4C,CAE5C,sBAAuB,CACvB,wBAAyB,CACzB,uBAAwB,CAExB,uBAAwB,CACxB,uBAAwB,CAExB,+DAKY,CACZ,cAAe,CACf,yBAA0B,CAC1B,wBAAyB,CACzB,0BAA2B,CAC3B,kCAAmC,CACnC,kCAAmC,CACnC,kBAAmB,CACnB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,mBAAoB,CACpB,kBAAmB,CACnB,yCACF,CAEA,mCACE,0BAA2B,CAC3B,aACF,CAEA,oCACE,eAAgB,CAChB,cAAe,CACf,yBACF,CAEA,wCACE,gBAAiB,CACjB,cAAe,CACf,eAAgB,CAChB,gBAAiB,CACjB,gCAAoC,CACpC,0BAA2B,CAC3B,kBAAmB,CACnB,kDACF,CAEA,0BACE,QAEE,SACF,CACA,IACE,WACF,CACF,CAEA,sCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,0CACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,OAAQ,CACR,YAAa,CACb,2BAA4B,CAC5B,iBACF,CAEA,mCACE,cAAe,CACf,0BACF',sourcesContent:['<script setup lang="ts">\n/**\n * 状态栏组件 - 浅色模式版本\n * 显示在每个 AI 消息楼层下方\n */\nimport { injectStreamingMessageContext } from \'@util/streaming\';\n\nconst ctx = injectStreamingMessageContext();\n\n// SVG 图标路径\nconst databaseIcon =\n  \'M12 2C6.48 2 2 4.69 2 8v8c0 3.31 4.48 6 10 6s10-2.69 10-6V8c0-3.31-4.48-6-10-6zm0 2c4.42 0 8 1.79 8 4s-3.58 4-8 4-8-1.79-8-4 3.58-4 8-4zm8 12c0 2.21-3.58 4-8 4s-8-1.79-8-4v-2.18c1.86 1.38 4.78 2.18 8 2.18s6.14-.8 8-2.18V16z\';\n<\/script>\n\n<template>\n  <div class="status-bar">\n    <div class="status-bar__header">\n      <svg class="status-bar__icon" viewBox="0 0 24 24" width="18" height="18">\n        <path :d="databaseIcon" fill="currentColor" />\n      </svg>\n      <span class="status-bar__title">通用状态栏</span>\n      <span v-if="ctx.during_streaming" class="status-bar__streaming">生成中...</span>\n    </div>\n    <div class="status-bar__content">\n      <div class="status-bar__placeholder">\n        <span>暂无状态数据</span>\n        <span class="status-bar__hint">点击扩展菜单中的「通用状态栏管理器」添加定义</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* ============================================\n   浅色模式状态栏 - 玻璃拟态风格\n   ============================================ */\n\n.status-bar {\n  --bar-bg: rgba(255, 255, 255, 0.92);\n  --bar-border: rgba(0, 0, 0, 0.08);\n  --bar-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n\n  --text-primary: #1f2937;\n  --text-secondary: #6b7280;\n  --text-tertiary: #9ca3af;\n\n  --color-primary: #6366f1;\n  --color-success: #10b981;\n\n  font-family:\n    \'Outfit\',\n    \'Inter\',\n    system-ui,\n    -apple-system,\n    sans-serif;\n  font-size: 14px;\n  color: var(--text-primary);\n  background: var(--bar-bg);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  border: 1px solid var(--bar-border);\n  border-radius: 12px;\n  padding: 14px 16px;\n  margin-top: 12px;\n  box-shadow: var(--bar-shadow);\n}\n\n.status-bar__header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding-bottom: 12px;\n  margin-bottom: 12px;\n  border-bottom: 1px solid var(--bar-border);\n}\n\n.status-bar__icon {\n  color: var(--color-primary);\n  flex-shrink: 0;\n}\n\n.status-bar__title {\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--text-primary);\n}\n\n.status-bar__streaming {\n  margin-left: auto;\n  font-size: 11px;\n  font-weight: 500;\n  padding: 3px 10px;\n  background: rgba(16, 185, 129, 0.12);\n  color: var(--color-success);\n  border-radius: 12px;\n  animation: pulse 1.5s ease-in-out infinite;\n}\n\n@keyframes pulse {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.status-bar__content {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.status-bar__placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  padding: 20px;\n  color: var(--text-secondary);\n  text-align: center;\n}\n\n.status-bar__hint {\n  font-size: 12px;\n  color: var(--text-tertiary);\n}\n</style>\n'],sourceRoot:''}]);const i=s},699(e){e.exports=function(e){var n=e[1],a=e[3];if(!a)return n;if('function'==typeof btoa){var t=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),r='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(t),o='/*# '.concat(r,' */');return[n].concat([o]).join('\n')}return[n].join('\n')}},792(e,n,a){a.r(n),a.d(n,{default:()=>i});var t=a(699),r=a.n(t),o=a(465),s=a.n(o)()(r());s.push([e.id,'.manager[data-v-e9b009b2]{--modal-bg:rgba(255,255,255,0.98);--modal-border:rgba(0,0,0,0.08);--modal-shadow:0 20px 60px rgba(0,0,0,0.15);--text-primary:#1f2937;--text-secondary:#6b7280;--text-tertiary:#9ca3af;--color-primary:#6366f1;--color-primary-hover:#4f46e5;--color-primary-subtle:rgba(99,102,241,0.1);--color-accent:#8b5cf6;--color-success:#10b981;--color-danger:#ef4444;--surface-hover:rgba(0,0,0,0.04);--surface-active:rgba(99,102,241,0.12);--nav-width:72px;--radius-md:8px;--radius-lg:12px;--radius-xl:16px;width:92vw;max-width:1100px;height:85vh;max-height:750px;background:var(--modal-bg);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border:1px solid var(--modal-border);border-radius:var(--radius-xl);box-shadow:var(--modal-shadow);display:flex;flex-direction:row;overflow:hidden;margin:auto;font-family:\'Inter\',\'Outfit\',system-ui,-apple-system,sans-serif}.manager__nav[data-v-e9b009b2]{width:var(--nav-width);min-width:var(--nav-width);background:rgba(0,0,0,0.02);border-right:1px solid var(--modal-border);display:flex;flex-direction:column;align-items:center;padding:24px 0;gap:12px;flex-shrink:0}.manager__nav-item[data-v-e9b009b2]{width:48px;height:48px;border-radius:var(--radius-lg);border:none;background:transparent;color:var(--text-tertiary);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s cubic-bezier(0.4,0,0.2,1);position:relative}.manager__nav-item[data-v-e9b009b2]:hover:not(.manager__nav-item--active){background:var(--surface-hover);color:var(--text-primary)}.manager__nav-item--active[data-v-e9b009b2]{background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;box-shadow:0 4px 12px rgba(99,102,241,0.35);transform:translateY(-2px)}.manager__nav-item--active[data-v-e9b009b2]::after{content:\'\';position:absolute;inset:-3px;border-radius:15px;border:2px solid var(--modal-bg);opacity:0.4;z-index:-1}.manager__nav-icon[data-v-e9b009b2]{flex-shrink:0}.manager__main[data-v-e9b009b2]{flex:1;display:flex;flex-direction:column;min-width:0;overflow:hidden}.manager__header[data-v-e9b009b2]{display:flex;justify-content:space-between;align-items:center;padding:20px 28px;background:rgba(255,255,255,0.6);border-bottom:1px solid var(--modal-border);flex-shrink:0}.manager__title-group[data-v-e9b009b2]{display:flex;flex-direction:column;gap:4px}.manager__title[data-v-e9b009b2]{margin:0;font-size:1.4rem;font-weight:700;color:var(--text-primary);letter-spacing:-0.02em}.manager__subtitle[data-v-e9b009b2]{margin:0;font-size:0.85rem;color:var(--text-tertiary)}.manager__actions[data-v-e9b009b2]{display:flex;align-items:center;gap:10px}.manager__btn[data-v-e9b009b2]{display:flex;align-items:center;gap:6px;padding:10px 18px;border:none;border-radius:var(--radius-md);font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s ease}.manager__btn--primary[data-v-e9b009b2]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-hover));color:#fff;box-shadow:0 2px 8px rgba(99,102,241,0.3)}.manager__btn--primary[data-v-e9b009b2]:hover{transform:translateY(-1px);box-shadow:0 4px 14px rgba(99,102,241,0.4)}.manager__btn--close[data-v-e9b009b2]{width:38px;height:38px;padding:0;background:var(--surface-hover);color:var(--text-tertiary);display:flex;align-items:center;justify-content:center;border-radius:50%}.manager__btn--close[data-v-e9b009b2]:hover{background:rgba(239,68,68,0.12);color:var(--color-danger)}.manager__content[data-v-e9b009b2]{flex:1;overflow:auto;padding:28px;background:linear-gradient(180deg,rgba(249,250,251,0.5) 0%,rgba(255,255,255,0) 100%)}.manager__placeholder[data-v-e9b009b2]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center}.manager__placeholder-icon[data-v-e9b009b2]{color:var(--color-primary);opacity:0.5;margin-bottom:20px}.manager__placeholder h2[data-v-e9b009b2]{margin:0 0 10px;font-size:1.6rem;font-weight:700;color:var(--text-primary)}.manager__placeholder-text[data-v-e9b009b2]{margin:0;color:var(--text-secondary);font-size:15px}.manager__placeholder-hint[data-v-e9b009b2]{margin:14px 0 0;color:var(--color-success);font-size:13px;font-weight:500}.manager__footer[data-v-e9b009b2]{display:flex;justify-content:space-between;padding:14px 28px;background:rgba(249,250,251,0.95);border-top:1px solid var(--modal-border);font-size:12px;color:var(--text-tertiary);flex-shrink:0}.manager__footer-status[data-v-e9b009b2]{color:var(--color-primary);font-weight:500}.manager__content[data-v-e9b009b2]::-webkit-scrollbar{width:6px}.manager__content[data-v-e9b009b2]::-webkit-scrollbar-track{background:transparent}.manager__content[data-v-e9b009b2]::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.12);border-radius:3px}.manager__content[data-v-e9b009b2]::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.2)}@media (max-width:640px){.manager[data-v-e9b009b2]{flex-direction:column-reverse;width:98vw;height:92vh}.manager__nav[data-v-e9b009b2]{width:100%;min-width:100%;height:auto;flex-direction:row;justify-content:space-around;padding:8px 12px;border-right:none;border-top:1px solid var(--modal-border);gap:0}.manager__nav-item[data-v-e9b009b2]{width:44px;height:44px}.manager__nav-item--active[data-v-e9b009b2]{transform:none}.manager__header[data-v-e9b009b2]{padding:16px 20px}.manager__title[data-v-e9b009b2]{font-size:1.2rem}.manager__content[data-v-e9b009b2]{padding:20px}}\n','',{version:3,sources:['webpack://./src/通用状态栏框架/components/manager/ManagerModal.vue'],names:[],mappings:'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',sourcesContent:['<script setup lang="ts">\n/**\n * 管理器模态框 - 左侧导航布局版本\n *\n * 基于 AIStudioAPP 版 UI 参考的设计系统\n * 左侧图标导航栏 + 主内容区\n */\nimport { computed, ref } from \'vue\';\n\ntype ModuleKey = \'data\' | \'definitions\' | \'styles\' | \'layout\' | \'config\';\n\nconst activeModule = ref<ModuleKey>(\'data\');\n\nconst modules = [\n  { key: \'data\', name: \'数据中心\', icon: \'database\', desc: \'管理角色状态数据\' },\n  { key: \'definitions\', name: \'定义工坊\', icon: \'box\', desc: \'定义数据结构与元数据\' },\n  { key: \'styles\', name: \'样式工坊\', icon: \'paintbrush\', desc: \'创建可复用样式单元\' },\n  { key: \'layout\', name: \'布局编排\', icon: \'layout\', desc: \'可视化设计状态栏布局\' },\n  { key: \'config\', name: \'系统配置\', icon: \'settings\', desc: \'预设、快照与系统设置\' },\n] as const;\n\nconst currentModule = computed(() => modules.find(m => m.key === activeModule.value));\n\n// SVG 图标路径 (Lucide Icons 风格)\nconst iconPaths: Record<string, string> = {\n  // Database - 数据中心\n  database:\n    \'M12 2C6.48 2 2 4.69 2 8v8c0 3.31 4.48 6 10 6s10-2.69 10-6V8c0-3.31-4.48-6-10-6zm0 2c4.42 0 8 1.79 8 4s-3.58 4-8 4-8-1.79-8-4 3.58-4 8-4zm8 12c0 2.21-3.58 4-8 4s-8-1.79-8-4v-2.18c1.86 1.38 4.78 2.18 8 2.18s6.14-.8 8-2.18V16z\',\n  // Box - 定义工坊\n  box: \'M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.36.2-.74.18-1.14 0l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.36-.2.74-.18 1.14 0l7.9 4.44c.32.17.53.5.53.88v9zM12 4.15 5.04 8 12 11.85 18.96 8 12 4.15z\',\n  // Paintbrush - 样式工坊\n  paintbrush:\n    \'M20.71 4.63l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41zM7 14a3 3 0 0 0-3 3c0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2a4 4 0 0 0 4-4 3 3 0 0 0-3-3z\',\n  // Layout - 布局编排\n  layout:\n    \'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 7h4v4H7V7zm6 0h4v4h-4V7zM7 13h4v4H7v-4zm6 0h4v4h-4v-4z\',\n  // Settings - 系统配置\n  settings:\n    \'M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\',\n  // Close\n  close: \'M18 6L6 18M6 6l12 12\',\n  // Save\n  save: \'M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\',\n};\n\nfunction handleClose() {\n  // 事件需要发送到主窗口（Vue 组件虽然挂载在主窗口 DOM，但脚本运行在 iframe 中）\n  const targetDocument = (window.parent ?? window).document;\n  const event = new CustomEvent(\'th:manager-close\');\n  targetDocument.documentElement.dispatchEvent(event);\n}\n<\/script>\n\n<template>\n  <div class="manager" @click.stop>\n    \x3c!-- 左侧图标导航栏 --\x3e\n    <nav class="manager__nav">\n      <button\n        v-for="mod in modules"\n        :key="mod.key"\n        type="button"\n        class="manager__nav-item"\n        :class="{ \'manager__nav-item--active\': activeModule === mod.key }"\n        :title="mod.name"\n        @click="activeModule = mod.key"\n      >\n        <svg class="manager__nav-icon" viewBox="0 0 24 24" width="22" height="22">\n          <path :d="iconPaths[mod.icon]" fill="currentColor" />\n        </svg>\n      </button>\n    </nav>\n\n    \x3c!-- 主内容区 --\x3e\n    <div class="manager__main">\n      \x3c!-- 顶部标题栏 --\x3e\n      <header class="manager__header">\n        <div class="manager__title-group">\n          <h1 class="manager__title">{{ currentModule?.name }}</h1>\n          <p class="manager__subtitle">{{ currentModule?.desc }}</p>\n        </div>\n        <div class="manager__actions">\n          <button class="manager__btn manager__btn--primary" type="button">\n            <svg viewBox="0 0 24 24" width="16" height="16">\n              <path :d="iconPaths.save" fill="currentColor" />\n            </svg>\n            <span>保存</span>\n          </button>\n          <button class="manager__btn manager__btn--close" type="button" @click="handleClose">\n            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">\n              <path :d="iconPaths.close" />\n            </svg>\n          </button>\n        </div>\n      </header>\n\n      \x3c!-- 模块内容区 --\x3e\n      <main class="manager__content">\n        <div class="manager__placeholder">\n          <svg class="manager__placeholder-icon" viewBox="0 0 24 24" width="64" height="64">\n            <path :d="iconPaths[currentModule?.icon || \'database\']" fill="currentColor" />\n          </svg>\n          <h2>{{ currentModule?.name }}</h2>\n          <p class="manager__placeholder-text">此模块正在开发中...</p>\n          <p class="manager__placeholder-hint">框架已成功加载！后续将逐步完善各项功能</p>\n        </div>\n      </main>\n\n      \x3c!-- 底部状态栏 --\x3e\n      <footer class="manager__footer">\n        <span>通用状态栏框架 v0.1.0</span>\n        <span class="manager__footer-status">浅色模式 · 开发中</span>\n      </footer>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* ============================================\n   左侧导航布局 - 基于 AIStudioAPP 版设计系统\n   ============================================ */\n\n.manager {\n  /* CSS 变量 */\n  --modal-bg: rgba(255, 255, 255, 0.98);\n  --modal-border: rgba(0, 0, 0, 0.08);\n  --modal-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);\n\n  --text-primary: #1f2937;\n  --text-secondary: #6b7280;\n  --text-tertiary: #9ca3af;\n\n  --color-primary: #6366f1;\n  --color-primary-hover: #4f46e5;\n  --color-primary-subtle: rgba(99, 102, 241, 0.1);\n  --color-accent: #8b5cf6;\n  --color-success: #10b981;\n  --color-danger: #ef4444;\n\n  --surface-hover: rgba(0, 0, 0, 0.04);\n  --surface-active: rgba(99, 102, 241, 0.12);\n\n  --nav-width: 72px;\n  --radius-md: 8px;\n  --radius-lg: 12px;\n  --radius-xl: 16px;\n\n  /* 布局 */\n  width: 92vw;\n  max-width: 1100px;\n  height: 85vh;\n  max-height: 750px;\n\n  background: var(--modal-bg);\n  backdrop-filter: blur(24px);\n  -webkit-backdrop-filter: blur(24px);\n  border: 1px solid var(--modal-border);\n  border-radius: var(--radius-xl);\n  box-shadow: var(--modal-shadow);\n\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n  margin: auto;\n\n  font-family:\n    \'Inter\',\n    \'Outfit\',\n    system-ui,\n    -apple-system,\n    sans-serif;\n}\n\n/* ====== 左侧导航栏 ====== */\n.manager__nav {\n  width: var(--nav-width);\n  min-width: var(--nav-width);\n  background: rgba(0, 0, 0, 0.02);\n  border-right: 1px solid var(--modal-border);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 24px 0;\n  gap: 12px;\n  flex-shrink: 0;\n}\n\n.manager__nav-item {\n  width: 48px;\n  height: 48px;\n  border-radius: var(--radius-lg);\n  border: none;\n  background: transparent;\n  color: var(--text-tertiary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n}\n\n.manager__nav-item:hover:not(.manager__nav-item--active) {\n  background: var(--surface-hover);\n  color: var(--text-primary);\n}\n\n.manager__nav-item--active {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: #fff;\n  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.35);\n  transform: translateY(-2px);\n}\n\n.manager__nav-item--active::after {\n  content: \'\';\n  position: absolute;\n  inset: -3px;\n  border-radius: 15px;\n  border: 2px solid var(--modal-bg);\n  opacity: 0.4;\n  z-index: -1;\n}\n\n.manager__nav-icon {\n  flex-shrink: 0;\n}\n\n/* ====== 主内容区 ====== */\n.manager__main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n  overflow: hidden;\n}\n\n/* 顶部标题栏 */\n.manager__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 28px;\n  background: rgba(255, 255, 255, 0.6);\n  border-bottom: 1px solid var(--modal-border);\n  flex-shrink: 0;\n}\n\n.manager__title-group {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.manager__title {\n  margin: 0;\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: var(--text-primary);\n  letter-spacing: -0.02em;\n}\n\n.manager__subtitle {\n  margin: 0;\n  font-size: 0.85rem;\n  color: var(--text-tertiary);\n}\n\n.manager__actions {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n/* 按钮 */\n.manager__btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 18px;\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.manager__btn--primary {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-primary-hover));\n  color: #fff;\n  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);\n}\n\n.manager__btn--primary:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 14px rgba(99, 102, 241, 0.4);\n}\n\n.manager__btn--close {\n  width: 38px;\n  height: 38px;\n  padding: 0;\n  background: var(--surface-hover);\n  color: var(--text-tertiary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n}\n\n.manager__btn--close:hover {\n  background: rgba(239, 68, 68, 0.12);\n  color: var(--color-danger);\n}\n\n/* 内容区 */\n.manager__content {\n  flex: 1;\n  overflow: auto;\n  padding: 28px;\n  background: linear-gradient(180deg, rgba(249, 250, 251, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\n.manager__placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n}\n\n.manager__placeholder-icon {\n  color: var(--color-primary);\n  opacity: 0.5;\n  margin-bottom: 20px;\n}\n\n.manager__placeholder h2 {\n  margin: 0 0 10px;\n  font-size: 1.6rem;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n\n.manager__placeholder-text {\n  margin: 0;\n  color: var(--text-secondary);\n  font-size: 15px;\n}\n\n.manager__placeholder-hint {\n  margin: 14px 0 0;\n  color: var(--color-success);\n  font-size: 13px;\n  font-weight: 500;\n}\n\n/* 底部状态栏 */\n.manager__footer {\n  display: flex;\n  justify-content: space-between;\n  padding: 14px 28px;\n  background: rgba(249, 250, 251, 0.95);\n  border-top: 1px solid var(--modal-border);\n  font-size: 12px;\n  color: var(--text-tertiary);\n  flex-shrink: 0;\n}\n\n.manager__footer-status {\n  color: var(--color-primary);\n  font-weight: 500;\n}\n\n/* 滚动条 */\n.manager__content::-webkit-scrollbar {\n  width: 6px;\n}\n\n.manager__content::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.manager__content::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.12);\n  border-radius: 3px;\n}\n\n.manager__content::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.2);\n}\n\n/* 响应式：小屏幕改为底部导航 */\n@media (max-width: 640px) {\n  .manager {\n    flex-direction: column-reverse;\n    width: 98vw;\n    height: 92vh;\n  }\n\n  .manager__nav {\n    width: 100%;\n    min-width: 100%;\n    height: auto;\n    flex-direction: row;\n    justify-content: space-around;\n    padding: 8px 12px;\n    border-right: none;\n    border-top: 1px solid var(--modal-border);\n    gap: 0;\n  }\n\n  .manager__nav-item {\n    width: 44px;\n    height: 44px;\n  }\n\n  .manager__nav-item--active {\n    transform: none;\n  }\n\n  .manager__header {\n    padding: 16px 20px;\n  }\n\n  .manager__title {\n    font-size: 1.2rem;\n  }\n\n  .manager__content {\n    padding: 20px;\n  }\n}\n</style>\n'],sourceRoot:''}]);const i=s},889(e,n){n.A=(e,n)=>{const a=e.__vccOpts||e;for(const[e,t]of n)a[e]=t;return a}}},n={};function a(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={id:t,exports:{}};return e[t](o,o.exports,a),o.exports}a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})};function t(e='head'){const n=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone()).appendTo(e);return{destroy:()=>n.remove()}}function r(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(e){const n=16*Math.random()|0;return('x'===e?n:3&n|8).toString(16)})}const o=Vue;function s(e,n={}){const{host:a='iframe',filter:s,prefix:i=r()}=n,c=new Map;let l=!1;const d=e=>{const n=Number($('#chat > .mes').first().attr('mesid'));return!_.inRange(e,n,SillyTavern.chat.length)&&(c.get(e)?.destroy(),!0)},A=()=>{c.keys().forEach(e=>d(e))},C=async(n,r)=>{if(l)return;if(d(n))return;const A=r??getChatMessages(n)[0].message??'';if(s&&!s(n,A))return void c.get(n)?.destroy();const C=$(`.mes[mesid='${n}']`),m=C.find('.mes_text').addClass('hidden!');C.find('.TH-streaming').addClass('hidden!');let p=C.find(`#${i}-${n}`);if(p.length>0){const e=c.get(n);if(e)return e.data.message=A,void(e.data.during_streaming=Boolean(r))}c.get(n)?.destroy(),p.remove();let g=C.find('.mes_streaming');0===g.length&&(g=$('<div class="mes_streaming">').css({'font-weight':'500','line-height':'calc(var(--mainFontSize) + .5rem)','max-width':'100%','overflow-wrap':'anywhere',padding:'calc(var(--mainFontSize) * 0.8) 0 0 0'}).insertAfter(m)),p=('iframe'===a?$('<iframe>').attr({script_id:getScriptId(),frameborder:0,srcdoc:'<!DOCTYPE html> <html> <head> <link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"> <script src="https://testingcf.jsdelivr.net/gh/n0vi028/JS-Slash-Runner/lib/tailwindcss.min.js"><\/script> <script src="https://testingcf.jsdelivr.net/npm/jquery"><\/script> <script src="https://testingcf.jsdelivr.net/npm/jquery-ui/dist/jquery-ui.min.js"><\/script> <link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/jquery-ui/themes/base/theme.min.css"/> <script src="https://testingcf.jsdelivr.net/npm/jquery-ui-touch-punch"><\/script> <script src="https://testingcf.jsdelivr.net/npm/lodash"><\/script> <script src="https://testingcf.jsdelivr.net/gh/n0vi028/JS-Slash-Runner/src/iframe/adjust_iframe_height.js"><\/script> <style>*,::after,::before{box-sizing:border-box}body,html{margin:0!important;padding:0;overflow:hidden!important;max-width:100%!important}</style> </head> <html> </html></html>'}).addClass('w-full'):$('<div>').attr('script_id',getScriptId())).attr('id',`${i}-${n}`).appendTo(g);const u=(0,o.reactive)({prefix:i,host_id:`${i}-${n}`,message_id:n,message:A,during_streaming:Boolean(r)}),v=e().provide('streaming_message_context',u);'iframe'===a?p.on('load',function(){t(this.contentDocument.head),v.mount(this.contentDocument.body)}):v.mount(p[0]);const b=new MutationObserver(()=>{const e=$('#chat').find('#curEditTextarea');e.parent().is(m)?(m.removeClass('hidden!'),p.addClass('hidden!')):0===e.length&&(m.addClass('hidden!'),C.find('.TH-streaming').addClass('hidden!'),p.removeClass('hidden!'))});b.observe(m[0],{childList:!0}),c.set(n,{app:v,data:u,destroy:()=>{const e=C.find('.TH-streaming');e.length>0?e.removeClass('hidden!'):m.removeClass('hidden!'),v.unmount(),p.remove(),0===g.children().length&&g.remove(),b.disconnect(),c.delete(n)}})},m=async(e={})=>{l||(e.destroy_all?c.forEach(({destroy:e})=>e()):A(),await Promise.all($('#chat').children('.mes[is_user=\'false\'][is_system=\'false\']').map(async(n,a)=>{const t=Number($(a).attr('mesid')??'NaN');isNaN(t)||(await C(t),e.trigger_event&&eventEmit(tavern_events.CHARACTER_MESSAGE_RENDERED,t,'rerender'))})))},p=[],g=(e,n,a)=>{p.push(a?eventMakeFirst(e,errorCatched(n)).stop:eventOn(e,errorCatched(n)).stop)};return g('chatLoaded',()=>{m({destroy_all:!0})}),g(tavern_events.CHARACTER_MESSAGE_RENDERED,e=>{A(),C(e)},!0),[tavern_events.MESSAGE_EDITED,tavern_events.MESSAGE_DELETED].forEach(e=>g(e,e=>{A(),c.get(e)?.destroy(),C(e)})),[tavern_events.MORE_MESSAGES_LOADED,tavern_events.MESSAGE_DELETED].forEach(e=>g(e,()=>setTimeout(errorCatched(m),1e3))),g(tavern_events.STREAM_TOKEN_RECEIVED,e=>{C(Number($('#chat').children('.mes.last_mes').attr('mesid')),e)}),'div'===a&&p.push(t().destroy),m({trigger_event:!0}),{unmount:()=>{const e=$('#chat').find('.TH-streaming');e.length>0?e.removeClass('hidden!'):$('chat').find('.mes_text').removeClass('hidden!'),c.forEach(({destroy:e})=>e()),p.forEach(e=>e()),l=!0}}}const i={class:'manager__nav'},c=['title','onClick'],l={class:'manager__nav-icon',viewBox:'0 0 24 24',width:'22',height:'22'},d=['d'],A={class:'manager__main'},C={class:'manager__header'},m={class:'manager__title-group'},p={class:'manager__title'},g={class:'manager__subtitle'},u={class:'manager__actions'},v={class:'manager__btn manager__btn--primary',type:'button'},b={viewBox:'0 0 24 24',width:'16',height:'16'},h=['d'],f={viewBox:'0 0 24 24',width:'20',height:'20',fill:'none',stroke:'currentColor','stroke-width':'2'},x=['d'],B={class:'manager__content'},y={class:'manager__placeholder'},E={class:'manager__placeholder-icon',viewBox:'0 0 24 24',width:'64',height:'64'},w=['d'],k=(0,o.defineComponent)({__name:'ManagerModal',setup(e){const n=(0,o.ref)('data'),a=[{key:'data',name:'数据中心',icon:'database',desc:'管理角色状态数据'},{key:'definitions',name:'定义工坊',icon:'box',desc:'定义数据结构与元数据'},{key:'styles',name:'样式工坊',icon:'paintbrush',desc:'创建可复用样式单元'},{key:'layout',name:'布局编排',icon:'layout',desc:'可视化设计状态栏布局'},{key:'config',name:'系统配置',icon:'settings',desc:'预设、快照与系统设置'}],t=(0,o.computed)(()=>a.find(e=>e.key===n.value)),r={database:'M12 2C6.48 2 2 4.69 2 8v8c0 3.31 4.48 6 10 6s10-2.69 10-6V8c0-3.31-4.48-6-10-6zm0 2c4.42 0 8 1.79 8 4s-3.58 4-8 4-8-1.79-8-4 3.58-4 8-4zm8 12c0 2.21-3.58 4-8 4s-8-1.79-8-4v-2.18c1.86 1.38 4.78 2.18 8 2.18s6.14-.8 8-2.18V16z',box:'M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.36.2-.74.18-1.14 0l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.36-.2.74-.18 1.14 0l7.9 4.44c.32.17.53.5.53.88v9zM12 4.15 5.04 8 12 11.85 18.96 8 12 4.15z',paintbrush:'M20.71 4.63l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41zM7 14a3 3 0 0 0-3 3c0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2a4 4 0 0 0 4-4 3 3 0 0 0-3-3z',layout:'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 7h4v4H7V7zm6 0h4v4h-4V7zM7 13h4v4H7v-4zm6 0h4v4h-4v-4z',settings:'M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z',close:'M18 6L6 18M6 6l12 12',save:'M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z'};function s(){const e=(window.parent??window).document,n=new CustomEvent('th:manager-close');e.documentElement.dispatchEvent(n)}return(e,k)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:'manager',onClick:k[0]||(k[0]=(0,o.withModifiers)(()=>{},['stop']))},[(0,o.createCommentVNode)(' 左侧图标导航栏 '),(0,o.createElementVNode)('nav',i,[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a,e=>(0,o.createElementVNode)('button',{key:e.key,type:'button',class:(0,o.normalizeClass)(['manager__nav-item',{'manager__nav-item--active':n.value===e.key}]),title:e.name,onClick:a=>n.value=e.key},[((0,o.openBlock)(),(0,o.createElementBlock)('svg',l,[(0,o.createElementVNode)('path',{d:r[e.icon],fill:'currentColor'},null,8,d)]))],10,c)),64))]),(0,o.createCommentVNode)(' 主内容区 '),(0,o.createElementVNode)('div',A,[(0,o.createCommentVNode)(' 顶部标题栏 '),(0,o.createElementVNode)('header',C,[(0,o.createElementVNode)('div',m,[(0,o.createElementVNode)('h1',p,(0,o.toDisplayString)(t.value?.name),1),(0,o.createElementVNode)('p',g,(0,o.toDisplayString)(t.value?.desc),1)]),(0,o.createElementVNode)('div',u,[(0,o.createElementVNode)('button',v,[((0,o.openBlock)(),(0,o.createElementBlock)('svg',b,[(0,o.createElementVNode)('path',{d:r.save,fill:'currentColor'},null,8,h)])),k[1]||(k[1]=(0,o.createElementVNode)('span',null,'保存',-1))]),(0,o.createElementVNode)('button',{class:'manager__btn manager__btn--close',type:'button',onClick:s},[((0,o.openBlock)(),(0,o.createElementBlock)('svg',f,[(0,o.createElementVNode)('path',{d:r.close},null,8,x)]))])])]),(0,o.createCommentVNode)(' 模块内容区 '),(0,o.createElementVNode)('main',B,[(0,o.createElementVNode)('div',y,[((0,o.openBlock)(),(0,o.createElementBlock)('svg',E,[(0,o.createElementVNode)('path',{d:r[t.value?.icon||'database'],fill:'currentColor'},null,8,w)])),(0,o.createElementVNode)('h2',null,(0,o.toDisplayString)(t.value?.name),1),k[2]||(k[2]=(0,o.createElementVNode)('p',{class:'manager__placeholder-text'},'此模块正在开发中...',-1)),k[3]||(k[3]=(0,o.createElementVNode)('p',{class:'manager__placeholder-hint'},'框架已成功加载！后续将逐步完善各项功能',-1))])]),(0,o.createCommentVNode)(' 底部状态栏 '),k[4]||(k[4]=(0,o.createElementVNode)('footer',{class:'manager__footer'},[(0,o.createElementVNode)('span',null,'通用状态栏框架 v0.1.0'),(0,o.createElementVNode)('span',{class:'manager__footer-status'},'浅色模式 · 开发中')],-1))])]))}});a(317);var M=a(889);const S=(0,M.A)(k,[['__scopeId','data-v-e9b009b2']]),V={class:'status-bar'},j={class:'status-bar__header'},F={key:0,class:'status-bar__streaming'},N=(0,o.defineComponent)({__name:'StatusBar',setup(e){const n=(0,o.readonly)((0,o.inject)('streaming_message_context'));return(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',V,[(0,o.createElementVNode)('div',j,[(0,o.createElementVNode)('svg',{class:'status-bar__icon',viewBox:'0 0 24 24',width:'18',height:'18'},[(0,o.createElementVNode)('path',{d:'M12 2C6.48 2 2 4.69 2 8v8c0 3.31 4.48 6 10 6s10-2.69 10-6V8c0-3.31-4.48-6-10-6zm0 2c4.42 0 8 1.79 8 4s-3.58 4-8 4-8-1.79-8-4 3.58-4 8-4zm8 12c0 2.21-3.58 4-8 4s-8-1.79-8-4v-2.18c1.86 1.38 4.78 2.18 8 2.18s6.14-.8 8-2.18V16z',fill:'currentColor'})]),a[0]||(a[0]=(0,o.createElementVNode)('span',{class:'status-bar__title'},'通用状态栏',-1)),(0,o.unref)(n).during_streaming?((0,o.openBlock)(),(0,o.createElementBlock)('span',F,'生成中...')):(0,o.createCommentVNode)('v-if',!0)]),a[1]||(a[1]=(0,o.createElementVNode)('div',{class:'status-bar__content'},[(0,o.createElementVNode)('div',{class:'status-bar__placeholder'},[(0,o.createElementVNode)('span',null,'暂无状态数据'),(0,o.createElementVNode)('span',{class:'status-bar__hint'},'点击扩展菜单中的「通用状态栏管理器」添加定义')])],-1))]))}});a(109);const D=(0,M.A)(N,[['__scopeId','data-v-0aa8f2f0']]),Y='通用状态栏管理器',T='th-statusbar-manager-container',I='__th_statusbar_owner__',O=window.parent??window;function W(){return O[I]??null}let R=null,U=null,q=null;async function G(){if(R){if(R.css('display','flex'),!U){q=t($(O.document.head)).destroy;const e=$('<div>').appendTo(R);U=(0,o.createApp)(S),U.mount(e[0])}console.log('[状态栏] 管理器已打开')}}function H(){R&&(R.css('display','none'),console.log('[状态栏] 管理器已关闭'))}function L(){if(!R)return;'none'!==R.css('display')?H():G()}let P=null;function Z(){const e=crypto?.randomUUID?.()??`${Date.now()}-${Math.random().toString(36).slice(2)}`,n=W();n&&(console.log('[状态栏] 检测到旧实例，正在清理...'),n.cleanup());var a;a={id:e,cleanup:()=>{console.log('[状态栏] 正在清理...'),U&&(U.unmount(),U=null),q?.(),q=null,R?.remove(),R=null,P?.(),P=null,replaceScriptButtons([]),delete O.__thStatusBarManager,delete O[I]}},O[I]=a,R=function(){const e=O.document.querySelector(`#${T}`);e&&e.remove();const n=$(O.document.createElement('div')).attr('id',T).css({position:'fixed',top:0,left:0,width:'100vw',height:'100vh',zIndex:99999,display:'none',backgroundColor:'rgba(0, 0, 0, 0.5)',alignItems:'center',justifyContent:'center'}).appendTo(O.document.body);return O.document.documentElement.addEventListener('th:manager-close',H),n}(),R.on('click',e=>{e.target===R[0]&&H()}),replaceScriptButtons([{name:Y,visible:!0}]),eventOn(getButtonEvent(Y),G),async function(){const{unmount:e}=s(()=>(0,o.createApp)(D),{host:'iframe',filter:(e,n)=>{const a=getChatMessages(e);return 0!==a.length&&'assistant'===a[0].role}});P=e,console.log('[状态栏] 流式界面已初始化')}(),O.__thStatusBarManager={show:G,hide:H,toggle:L,isVisible:()=>'none'!==R?.css('display')},console.log('[状态栏] 初始化完成')}$(()=>{try{Z()}catch(e){console.error('[状态栏] 初始化失败:',e),toastr.error(`状态栏初始化失败: ${e.message}`,'错误')}$(window).on('pagehide',()=>{const e=W();e?.cleanup()})});
//# sourceMappingURL=index.js.map